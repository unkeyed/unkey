---
title: Credits
description: "Identities can be used to share credits across multiple keys"
---

<Tip>
  Identities are in public beta, please report any issues you encounter:
  [support](mailto:support@unkey.dev).
</Tip>

## Sharing credits

Identities let you share a credit pool across multiple keys. For example, if you want to give a user 1000 credits per month:

Without identities: Setting 1000 credits per key means a user with 3 keys gets 3000 total credits (1000 Ã— 3).

With identities: Create an identity with 1000 credits and associate all the user's keys with it. Now all keys share the same pool of 1000 credits.

## How it works

When you configure credits on an identity:

1. **Shared counter**: All keys associated with the identity draw from the same credit counter
2. **Automatic refills**: You can configure automatic refills (daily or monthly) to reset credits periodically

When a key with identity credits is verified, the credit cost is deducted from the shared identity counter, ensuring consistent usage tracking across all of the user's keys.

## Example use case

Let's say you're building a SaaS product with different subscription tiers:

- **Free tier**: 100 credits per day
- **Pro tier**: 10,000 credits per month
- **Enterprise**: Unlimited (no credits configured)

When a user signs up for the Pro tier:

```typescript
// Create the identity with credits
const identity = await unkey.identities.createIdentity({
  externalId: user.id,
  credits: {
    remaining: 10000,
    refill: {
      interval: "monthly",
      amount: 10000,
      refillDay: 1, // Refill on the 1st of each month
    },
  },
});

// Create keys for the user
const key1 = await unkey.keys.create({
  apiId: "api_123",
  identityId: identity.id,
});

const key2 = await unkey.keys.create({
  apiId: "api_123",
  identityId: identity.id,
});
```

Now both `key1` and `key2` share the same 10,000 credits. If the user consumes 3,000 credits with `key1`, they'll have 7,000 credits remaining for both keys combined.

### Updating tiers

When a user upgrades or downgrades their subscription, you can update their credits accordingly:

```typescript
// User upgrades from Pro to Enterprise (unlimited)
await unkey.identities.updateIdentity({
  identityId: identity.id,
  credits: null, // Remove credit limits for unlimited usage
});

// User downgrades from Pro to Free tier
await unkey.identities.updateIdentity({
  identityId: identity.id,
  credits: {
    remaining: 100,
    refill: {
      interval: "daily",
      amount: 100,
    },
  },
});
```

When you update the credits configuration, all keys associated with the identity will immediately use the new credit limits. This makes it easy to handle subscription changes without having to update each individual key.

<Info>
  API reference for creating identities: [/api-reference/v2/identities/create-identity](https://www.unkey.com/docs/api-reference/v2/identities/create-identity)

API reference for creating keys: [/api-reference/v2/keys/create-api-key](https://www.unkey.com/docs/api-reference/v2/keys/create-api-key)

API reference for verifying keys: [/api-reference/v2/keys/verify-api-key](https://www.unkey.com/docs/api-reference/v2/keys/verify-api-key)

</Info>
