name = "llmcache-preview"
compatibility_date = "2023-12-01"


main = "src/worker.ts"


# The rate limiting API is in open beta.
[[unsafe.bindings]]
name = "RL_FREE"
type = "ratelimit"
# An identifier you define, that is unique to your Cloudflare account.
# Must be an integer.
namespace_id = "1001"
simple = { limit = 60, period = 60 }



[[vectorize]]
binding = "VECTORIZE_INDEX"
index_name = "llmcache-workersai2"

[[kv_namespaces]]
binding = "llmcache"
id = "d34176cf592646b18ac59b3b0dc3677f"
preview_id = "fbb60e26369e4ec680bd75dcbab3622c"

[ai]
binding = "AI"

[placement]
mode = "smart"

# necessary to use tiktoken in Cloudflare Workers 
# https://www.npmjs.com/package/tiktoken#cloudflare-workers
[[rules]]
globs = ["**/*.wasm"]
type = "CompiledWasm"
fallthrough = true



[vars]
FALLBACK_SUBDOMAIN = "test"



[env.preview]
routes = [{ pattern = "*.llm-preview.unkey.io/*", zone_name = "unkey.io" }]
[env.preview.vars]
APEX_DOMAIN = "llm-preview.unkey.io"


[env.production]
routes = [{ pattern = "*.llm.unkey.io/*", zone_name = "unkey.io" }]
[env.production.vars]
APEX_DOMAIN = "llm.unkey.io"
