---
title: ClickHouse Proxy
---
import {GithubIcon} from "lucide-react"

Our ClickHouse Proxy is a Bun app runnng on AWS Apprunner. It's only purpose is to receive small batches - or even just single rows - to batch them before sending them in bulk to ClickHouse.
It does this by implementing the same HTTP interface as ClickHouse and buffering rows in memory, flushing periodically either every few seconds or when the buffer is full.

It's available at `clickhouse.unkey.cloud`.


Using the proxy is optional in development, but it can be enabled by providing the `CLICKHOUSE_INSERT_URL` environment variable in our API.

## IaC

Our ClickHouse proxy is fully managed in [unkeyed/infra](https://github.com/unkeyed/infra).


## References

<Callout title="Code" icon={<GithubIcon/>}>
[https://github.com/unkeyed/unkey/tree/main/apps/chproxy](https://github.com/unkeyed/unkey/tree/main/apps/chproxy)
</Callout>
