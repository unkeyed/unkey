// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: state_change_get_max_sequence.sql

package db

import (
	"context"
)

const getMaxStateChangeSequence = `-- name: GetMaxStateChangeSequence :one
SELECT CAST(COALESCE(MAX(sequence), 0) AS UNSIGNED) AS max_sequence
FROM ` + "`" + `state_changes` + "`" + `
WHERE region = ?
`

// Returns the highest sequence for a region.
// Used during bootstrap to get the watermark before streaming current state.
//
//	SELECT CAST(COALESCE(MAX(sequence), 0) AS UNSIGNED) AS max_sequence
//	FROM `state_changes`
//	WHERE region = ?
func (q *Queries) GetMaxStateChangeSequence(ctx context.Context, db DBTX, region string) (int64, error) {
	row := db.QueryRowContext(ctx, getMaxStateChangeSequence, region)
	var max_sequence int64
	err := row.Scan(&max_sequence)
	return max_sequence, err
}
