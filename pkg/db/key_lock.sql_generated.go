// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: key_lock.sql

package db

import (
	"context"
)

const lockKeyForUpdate = `-- name: LockKeyForUpdate :one
SELECT id FROM ` + "`" + `keys` + "`" + `
WHERE id = ?
FOR UPDATE
`

// Acquires an exclusive lock on the key row to prevent concurrent modifications.
// This is used to prevent deadlocks when updating key ratelimits concurrently.
//
//	SELECT id FROM `keys`
//	WHERE id = ?
//	FOR UPDATE
func (q *Queries) LockKeyForUpdate(ctx context.Context, db DBTX, id string) (string, error) {
	row := db.QueryRowContext(ctx, lockKeyForUpdate, id)
	err := row.Scan(&id)
	return id, err
}
