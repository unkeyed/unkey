// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: app_runtime_settings_upsert.sql

package db

import (
	"context"
	"database/sql"

	dbtype "github.com/unkeyed/unkey/pkg/db/types"
)

const upsertAppRuntimeSettings = `-- name: UpsertAppRuntimeSettings :exec
INSERT INTO app_runtime_settings (
    workspace_id,
    app_id,
    environment_id,
    port,
    cpu_millicores,
    memory_mib,
    command,
    healthcheck,
    region_config,
    shutdown_signal,
    sentinel_config,
    created_at,
    updated_at
) VALUES (
    ?,
    ?,
    ?,
    ?,
    ?,
    ?,
    ?,
    ?,
    ?,
    ?,
    ?,
    ?,
    ?
)
ON DUPLICATE KEY UPDATE
    port = VALUES(port),
    cpu_millicores = VALUES(cpu_millicores),
    memory_mib = VALUES(memory_mib),
    command = VALUES(command),
    healthcheck = VALUES(healthcheck),
    region_config = VALUES(region_config),
    shutdown_signal = VALUES(shutdown_signal),
    sentinel_config = VALUES(sentinel_config),
    updated_at = VALUES(updated_at)
`

type UpsertAppRuntimeSettingsParams struct {
	WorkspaceID    string                           `db:"workspace_id"`
	AppID          string                           `db:"app_id"`
	EnvironmentID  string                           `db:"environment_id"`
	Port           int32                            `db:"port"`
	CpuMillicores  int32                            `db:"cpu_millicores"`
	MemoryMib      int32                            `db:"memory_mib"`
	Command        dbtype.StringSlice               `db:"command"`
	Healthcheck    dbtype.NullHealthcheck           `db:"healthcheck"`
	RegionConfig   dbtype.RegionConfig              `db:"region_config"`
	ShutdownSignal AppRuntimeSettingsShutdownSignal `db:"shutdown_signal"`
	SentinelConfig []byte                           `db:"sentinel_config"`
	CreatedAt      int64                            `db:"created_at"`
	UpdatedAt      sql.NullInt64                    `db:"updated_at"`
}

// UpsertAppRuntimeSettings
//
//	INSERT INTO app_runtime_settings (
//	    workspace_id,
//	    app_id,
//	    environment_id,
//	    port,
//	    cpu_millicores,
//	    memory_mib,
//	    command,
//	    healthcheck,
//	    region_config,
//	    shutdown_signal,
//	    sentinel_config,
//	    created_at,
//	    updated_at
//	) VALUES (
//	    ?,
//	    ?,
//	    ?,
//	    ?,
//	    ?,
//	    ?,
//	    ?,
//	    ?,
//	    ?,
//	    ?,
//	    ?,
//	    ?,
//	    ?
//	)
//	ON DUPLICATE KEY UPDATE
//	    port = VALUES(port),
//	    cpu_millicores = VALUES(cpu_millicores),
//	    memory_mib = VALUES(memory_mib),
//	    command = VALUES(command),
//	    healthcheck = VALUES(healthcheck),
//	    region_config = VALUES(region_config),
//	    shutdown_signal = VALUES(shutdown_signal),
//	    sentinel_config = VALUES(sentinel_config),
//	    updated_at = VALUES(updated_at)
func (q *Queries) UpsertAppRuntimeSettings(ctx context.Context, db DBTX, arg UpsertAppRuntimeSettingsParams) error {
	_, err := db.ExecContext(ctx, upsertAppRuntimeSettings,
		arg.WorkspaceID,
		arg.AppID,
		arg.EnvironmentID,
		arg.Port,
		arg.CpuMillicores,
		arg.MemoryMib,
		arg.Command,
		arg.Healthcheck,
		arg.RegionConfig,
		arg.ShutdownSignal,
		arg.SentinelConfig,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	return err
}
