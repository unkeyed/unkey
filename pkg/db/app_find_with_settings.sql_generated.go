// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: app_find_with_settings.sql

package db

import (
	"context"
)

const findAppWithSettings = `-- name: FindAppWithSettings :one
SELECT
    a.pk, a.id, a.workspace_id, a.project_id, a.name, a.slug, a.live_deployment_id, a.depot_project_id, a.delete_protection, a.created_at, a.updated_at,
    abs.pk, abs.workspace_id, abs.app_id, abs.environment_id, abs.dockerfile, abs.docker_context, abs.created_at, abs.updated_at,
    ars.pk, ars.workspace_id, ars.app_id, ars.environment_id, ars.port, ars.cpu_millicores, ars.memory_mib, ars.command, ars.healthcheck, ars.region_config, ars.shutdown_signal, ars.sentinel_config, ars.created_at, ars.updated_at
FROM apps a
INNER JOIN app_build_settings abs ON abs.app_id = a.id AND abs.environment_id = ?
INNER JOIN app_runtime_settings ars ON ars.app_id = a.id AND ars.environment_id = ?
WHERE a.project_id = ?
  AND a.slug = ?
`

type FindAppWithSettingsParams struct {
	EnvironmentID string `db:"environment_id"`
	ProjectID     string `db:"project_id"`
	Slug          string `db:"slug"`
}

type FindAppWithSettingsRow struct {
	App               App               `db:"app"`
	AppBuildSetting   AppBuildSetting   `db:"app_build_setting"`
	AppRuntimeSetting AppRuntimeSetting `db:"app_runtime_setting"`
}

// FindAppWithSettings
//
//	SELECT
//	    a.pk, a.id, a.workspace_id, a.project_id, a.name, a.slug, a.live_deployment_id, a.depot_project_id, a.delete_protection, a.created_at, a.updated_at,
//	    abs.pk, abs.workspace_id, abs.app_id, abs.environment_id, abs.dockerfile, abs.docker_context, abs.created_at, abs.updated_at,
//	    ars.pk, ars.workspace_id, ars.app_id, ars.environment_id, ars.port, ars.cpu_millicores, ars.memory_mib, ars.command, ars.healthcheck, ars.region_config, ars.shutdown_signal, ars.sentinel_config, ars.created_at, ars.updated_at
//	FROM apps a
//	INNER JOIN app_build_settings abs ON abs.app_id = a.id AND abs.environment_id = ?
//	INNER JOIN app_runtime_settings ars ON ars.app_id = a.id AND ars.environment_id = ?
//	WHERE a.project_id = ?
//	  AND a.slug = ?
func (q *Queries) FindAppWithSettings(ctx context.Context, db DBTX, arg FindAppWithSettingsParams) (FindAppWithSettingsRow, error) {
	row := db.QueryRowContext(ctx, findAppWithSettings,
		arg.EnvironmentID,
		arg.EnvironmentID,
		arg.ProjectID,
		arg.Slug,
	)
	var i FindAppWithSettingsRow
	err := row.Scan(
		&i.App.Pk,
		&i.App.ID,
		&i.App.WorkspaceID,
		&i.App.ProjectID,
		&i.App.Name,
		&i.App.Slug,
		&i.App.LiveDeploymentID,
		&i.App.DepotProjectID,
		&i.App.DeleteProtection,
		&i.App.CreatedAt,
		&i.App.UpdatedAt,
		&i.AppBuildSetting.Pk,
		&i.AppBuildSetting.WorkspaceID,
		&i.AppBuildSetting.AppID,
		&i.AppBuildSetting.EnvironmentID,
		&i.AppBuildSetting.Dockerfile,
		&i.AppBuildSetting.DockerContext,
		&i.AppBuildSetting.CreatedAt,
		&i.AppBuildSetting.UpdatedAt,
		&i.AppRuntimeSetting.Pk,
		&i.AppRuntimeSetting.WorkspaceID,
		&i.AppRuntimeSetting.AppID,
		&i.AppRuntimeSetting.EnvironmentID,
		&i.AppRuntimeSetting.Port,
		&i.AppRuntimeSetting.CpuMillicores,
		&i.AppRuntimeSetting.MemoryMib,
		&i.AppRuntimeSetting.Command,
		&i.AppRuntimeSetting.Healthcheck,
		&i.AppRuntimeSetting.RegionConfig,
		&i.AppRuntimeSetting.ShutdownSignal,
		&i.AppRuntimeSetting.SentinelConfig,
		&i.AppRuntimeSetting.CreatedAt,
		&i.AppRuntimeSetting.UpdatedAt,
	)
	return i, err
}
