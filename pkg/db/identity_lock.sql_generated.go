// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: identity_lock.sql

package db

import (
	"context"
)

const lockIdentityForUpdate = `-- name: LockIdentityForUpdate :one
SELECT id FROM identities
WHERE id = ?
FOR UPDATE
`

// Acquires an exclusive lock on the identity row to prevent concurrent modifications.
// This should be called at the start of a transaction before modifying identity-related data.
//
//	SELECT id FROM identities
//	WHERE id = ?
//	FOR UPDATE
func (q *Queries) LockIdentityForUpdate(ctx context.Context, db DBTX, id string) (string, error) {
	row := db.QueryRowContext(ctx, lockIdentityForUpdate, id)
	err := row.Scan(&id)
	return id, err
}
