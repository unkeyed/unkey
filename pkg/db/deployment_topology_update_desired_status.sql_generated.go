// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: deployment_topology_update_desired_status.sql

package db

import (
	"context"
	"database/sql"
)

const updateDeploymentTopologyDesiredStatus = `-- name: UpdateDeploymentTopologyDesiredStatus :exec
UPDATE ` + "`" + `deployment_topology` + "`" + `
SET desired_status = ?, version = ?, updated_at = ?
WHERE deployment_id = ? AND region = ?
`

type UpdateDeploymentTopologyDesiredStatusParams struct {
	DesiredStatus DeploymentTopologyDesiredStatus `db:"desired_status"`
	Version       uint64                          `db:"version"`
	UpdatedAt     sql.NullInt64                   `db:"updated_at"`
	DeploymentID  string                          `db:"deployment_id"`
	Region        string                          `db:"region"`
}

// UpdateDeploymentTopologyDesiredStatus updates the desired_status and version of a topology entry.
// A new version is required so that WatchDeployments picks up the change.
//
//	UPDATE `deployment_topology`
//	SET desired_status = ?, version = ?, updated_at = ?
//	WHERE deployment_id = ? AND region = ?
func (q *Queries) UpdateDeploymentTopologyDesiredStatus(ctx context.Context, db DBTX, arg UpdateDeploymentTopologyDesiredStatusParams) error {
	_, err := db.ExecContext(ctx, updateDeploymentTopologyDesiredStatus, arg.DesiredStatus, arg.Version, arg.UpdatedAt, arg.DeploymentID, arg.Region)
	return err
}
