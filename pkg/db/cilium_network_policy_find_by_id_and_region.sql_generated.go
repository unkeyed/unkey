// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: cilium_network_policy_find_by_id_and_region.sql

package db

import (
	"context"
	"database/sql"
)

const findCiliumNetworkPolicyByIDAndRegion = `-- name: FindCiliumNetworkPolicyByIDAndRegion :one
SELECT
    n.pk, n.id, n.workspace_id, n.project_id, n.environment_id, n.k8s_name, n.region, n.policy, n.version, n.created_at, n.updated_at,
    w.k8s_namespace
FROM ` + "`" + `cilium_network_policies` + "`" + ` n
JOIN ` + "`" + `workspaces` + "`" + ` w ON w.id = n.workspace_id
WHERE n.region = ? AND n.id = ?
LIMIT 1
`

type FindCiliumNetworkPolicyByIDAndRegionParams struct {
	Region                string `db:"region"`
	CiliumNetworkPolicyID string `db:"cilium_network_policy_id"`
}

type FindCiliumNetworkPolicyByIDAndRegionRow struct {
	CiliumNetworkPolicy CiliumNetworkPolicy `db:"cilium_network_policy"`
	K8sNamespace        sql.NullString      `db:"k8s_namespace"`
}

// FindCiliumNetworkPolicyByIDAndRegion
//
//	SELECT
//	    n.pk, n.id, n.workspace_id, n.project_id, n.environment_id, n.k8s_name, n.region, n.policy, n.version, n.created_at, n.updated_at,
//	    w.k8s_namespace
//	FROM `cilium_network_policies` n
//	JOIN `workspaces` w ON w.id = n.workspace_id
//	WHERE n.region = ? AND n.id = ?
//	LIMIT 1
func (q *Queries) FindCiliumNetworkPolicyByIDAndRegion(ctx context.Context, db DBTX, arg FindCiliumNetworkPolicyByIDAndRegionParams) (FindCiliumNetworkPolicyByIDAndRegionRow, error) {
	row := db.QueryRowContext(ctx, findCiliumNetworkPolicyByIDAndRegion, arg.Region, arg.CiliumNetworkPolicyID)
	var i FindCiliumNetworkPolicyByIDAndRegionRow
	err := row.Scan(
		&i.CiliumNetworkPolicy.Pk,
		&i.CiliumNetworkPolicy.ID,
		&i.CiliumNetworkPolicy.WorkspaceID,
		&i.CiliumNetworkPolicy.ProjectID,
		&i.CiliumNetworkPolicy.EnvironmentID,
		&i.CiliumNetworkPolicy.K8sName,
		&i.CiliumNetworkPolicy.Region,
		&i.CiliumNetworkPolicy.Policy,
		&i.CiliumNetworkPolicy.Version,
		&i.CiliumNetworkPolicy.CreatedAt,
		&i.CiliumNetworkPolicy.UpdatedAt,
		&i.K8sNamespace,
	)
	return i, err
}
