// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: environment_runtime_settings_upsert.sql

package db

import (
	"context"

	dbtype "github.com/unkeyed/unkey/pkg/db/types"
)

const upsertEnvironmentRuntimeSettings = `-- name: UpsertEnvironmentRuntimeSettings :exec
INSERT INTO environment_runtime_settings (
    id,
    workspace_id,
    environment_id,
    port,
    cpu_millicores,
    memory_mib,
    command,
    healthcheck_path,
    region_config,
    restart_policy,
    shutdown_signal,
    created_at
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
ON DUPLICATE KEY UPDATE
    port = VALUES(port),
    cpu_millicores = VALUES(cpu_millicores),
    memory_mib = VALUES(memory_mib),
    command = VALUES(command),
    healthcheck_path = VALUES(healthcheck_path),
    region_config = VALUES(region_config),
    restart_policy = VALUES(restart_policy),
    shutdown_signal = VALUES(shutdown_signal)
`

type UpsertEnvironmentRuntimeSettingsParams struct {
	ID              string              `db:"id"`
	WorkspaceID     string              `db:"workspace_id"`
	EnvironmentID   string              `db:"environment_id"`
	Port            int32               `db:"port"`
	CpuMillicores   int32               `db:"cpu_millicores"`
	MemoryMib       int32               `db:"memory_mib"`
	Command         dbtype.StringSlice  `db:"command"`
	HealthcheckPath string              `db:"healthcheck_path"`
	RegionConfig    dbtype.RegionConfig `db:"region_config"`
	RestartPolicy   string              `db:"restart_policy"`
	ShutdownSignal  string              `db:"shutdown_signal"`
	CreatedAt       int64               `db:"created_at"`
}

// UpsertEnvironmentRuntimeSettings
//
//	INSERT INTO environment_runtime_settings (
//	    id,
//	    workspace_id,
//	    environment_id,
//	    port,
//	    cpu_millicores,
//	    memory_mib,
//	    command,
//	    healthcheck_path,
//	    region_config,
//	    restart_policy,
//	    shutdown_signal,
//	    created_at
//	) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
//	ON DUPLICATE KEY UPDATE
//	    port = VALUES(port),
//	    cpu_millicores = VALUES(cpu_millicores),
//	    memory_mib = VALUES(memory_mib),
//	    command = VALUES(command),
//	    healthcheck_path = VALUES(healthcheck_path),
//	    region_config = VALUES(region_config),
//	    restart_policy = VALUES(restart_policy),
//	    shutdown_signal = VALUES(shutdown_signal)
func (q *Queries) UpsertEnvironmentRuntimeSettings(ctx context.Context, db DBTX, arg UpsertEnvironmentRuntimeSettingsParams) error {
	_, err := db.ExecContext(ctx, upsertEnvironmentRuntimeSettings,
		arg.ID,
		arg.WorkspaceID,
		arg.EnvironmentID,
		arg.Port,
		arg.CpuMillicores,
		arg.MemoryMib,
		arg.Command,
		arg.HealthcheckPath,
		arg.RegionConfig,
		arg.RestartPolicy,
		arg.ShutdownSignal,
		arg.CreatedAt,
	)
	return err
}
