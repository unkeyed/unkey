// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: environment_runtime_settings_upsert.sql

package db

import (
	"context"
	"database/sql"

	dbtype "github.com/unkeyed/unkey/pkg/db/types"
)

const upsertEnvironmentRuntimeSettings = `-- name: UpsertEnvironmentRuntimeSettings :exec
INSERT INTO environment_runtime_settings (
    id,
    workspace_id,
    environment_id,
    port,
    cpu_millicores,
    memory_mib,
    command,
    healthcheck,
    region_config,
    shutdown_signal,
    created_at,
    updated_at
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
ON DUPLICATE KEY UPDATE
    port = VALUES(port),
    cpu_millicores = VALUES(cpu_millicores),
    memory_mib = VALUES(memory_mib),
    command = VALUES(command),
    healthcheck = VALUES(healthcheck),
    region_config = VALUES(region_config),
    shutdown_signal = VALUES(shutdown_signal),
    updated_at = VALUES(updated_at)
`

type UpsertEnvironmentRuntimeSettingsParams struct {
	ID             string                                   `db:"id"`
	WorkspaceID    string                                   `db:"workspace_id"`
	EnvironmentID  string                                   `db:"environment_id"`
	Port           int32                                    `db:"port"`
	CpuMillicores  int32                                    `db:"cpu_millicores"`
	MemoryMib      int32                                    `db:"memory_mib"`
	Command        dbtype.StringSlice                       `db:"command"`
	Healthcheck    dbtype.NullHealthcheck                   `db:"healthcheck"`
	RegionConfig   dbtype.RegionConfig                      `db:"region_config"`
	ShutdownSignal EnvironmentRuntimeSettingsShutdownSignal `db:"shutdown_signal"`
	CreatedAt      int64                                    `db:"created_at"`
	UpdatedAt      sql.NullInt64                            `db:"updated_at"`
}

// UpsertEnvironmentRuntimeSettings
//
//	INSERT INTO environment_runtime_settings (
//	    id,
//	    workspace_id,
//	    environment_id,
//	    port,
//	    cpu_millicores,
//	    memory_mib,
//	    command,
//	    healthcheck,
//	    region_config,
//	    shutdown_signal,
//	    created_at,
//	    updated_at
//	) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
//	ON DUPLICATE KEY UPDATE
//	    port = VALUES(port),
//	    cpu_millicores = VALUES(cpu_millicores),
//	    memory_mib = VALUES(memory_mib),
//	    command = VALUES(command),
//	    healthcheck = VALUES(healthcheck),
//	    region_config = VALUES(region_config),
//	    shutdown_signal = VALUES(shutdown_signal),
//	    updated_at = VALUES(updated_at)
func (q *Queries) UpsertEnvironmentRuntimeSettings(ctx context.Context, db DBTX, arg UpsertEnvironmentRuntimeSettingsParams) error {
	_, err := db.ExecContext(ctx, upsertEnvironmentRuntimeSettings,
		arg.ID,
		arg.WorkspaceID,
		arg.EnvironmentID,
		arg.Port,
		arg.CpuMillicores,
		arg.MemoryMib,
		arg.Command,
		arg.Healthcheck,
		arg.RegionConfig,
		arg.ShutdownSignal,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	return err
}
