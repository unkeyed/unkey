// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: state_change_get_min_sequence.sql

package db

import (
	"context"
)

const getMinStateChangeSequence = `-- name: GetMinStateChangeSequence :one
SELECT CAST(COALESCE(MIN(sequence), 0) AS UNSIGNED) AS min_sequence
FROM ` + "`" + `state_changes` + "`" + `
WHERE region = ?
`

// Returns the lowest retained sequence for a region.
// Used to detect if a client's watermark is too old (requires full resync).
//
//	SELECT CAST(COALESCE(MIN(sequence), 0) AS UNSIGNED) AS min_sequence
//	FROM `state_changes`
//	WHERE region = ?
func (q *Queries) GetMinStateChangeSequence(ctx context.Context, db DBTX, region string) (int64, error) {
	row := db.QueryRowContext(ctx, getMinStateChangeSequence, region)
	var min_sequence int64
	err := row.Scan(&min_sequence)
	return min_sequence, err
}
