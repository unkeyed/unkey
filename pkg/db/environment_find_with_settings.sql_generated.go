// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: environment_find_with_settings.sql

package db

import (
	"context"
)

const findEnvironmentWithSettingsByProjectIdAndSlug = `-- name: FindEnvironmentWithSettingsByProjectIdAndSlug :one
SELECT
    e.pk, e.id, e.workspace_id, e.project_id, e.slug, e.description, e.delete_protection, e.created_at, e.updated_at,
    ebs.pk, ebs.workspace_id, ebs.environment_id, ebs.dockerfile, ebs.docker_context, ebs.created_at, ebs.updated_at,
    ers.pk, ers.workspace_id, ers.environment_id, ers.port, ers.cpu_millicores, ers.memory_mib, ers.command, ers.healthcheck, ers.region_config, ers.shutdown_signal, ers.sentinel_config, ers.created_at, ers.updated_at
FROM environments e
INNER JOIN environment_build_settings ebs ON ebs.environment_id = e.id
INNER JOIN environment_runtime_settings ers ON ers.environment_id = e.id
WHERE e.workspace_id = ?
  AND e.project_id = ?
  AND e.slug = ?
`

type FindEnvironmentWithSettingsByProjectIdAndSlugParams struct {
	WorkspaceID string `db:"workspace_id"`
	ProjectID   string `db:"project_id"`
	Slug        string `db:"slug"`
}

type FindEnvironmentWithSettingsByProjectIdAndSlugRow struct {
	Environment               Environment               `db:"environment"`
	EnvironmentBuildSetting   EnvironmentBuildSetting   `db:"environment_build_setting"`
	EnvironmentRuntimeSetting EnvironmentRuntimeSetting `db:"environment_runtime_setting"`
}

// FindEnvironmentWithSettingsByProjectIdAndSlug
//
//	SELECT
//	    e.pk, e.id, e.workspace_id, e.project_id, e.slug, e.description, e.delete_protection, e.created_at, e.updated_at,
//	    ebs.pk, ebs.workspace_id, ebs.environment_id, ebs.dockerfile, ebs.docker_context, ebs.created_at, ebs.updated_at,
//	    ers.pk, ers.workspace_id, ers.environment_id, ers.port, ers.cpu_millicores, ers.memory_mib, ers.command, ers.healthcheck, ers.region_config, ers.shutdown_signal, ers.sentinel_config, ers.created_at, ers.updated_at
//	FROM environments e
//	INNER JOIN environment_build_settings ebs ON ebs.environment_id = e.id
//	INNER JOIN environment_runtime_settings ers ON ers.environment_id = e.id
//	WHERE e.workspace_id = ?
//	  AND e.project_id = ?
//	  AND e.slug = ?
func (q *Queries) FindEnvironmentWithSettingsByProjectIdAndSlug(ctx context.Context, db DBTX, arg FindEnvironmentWithSettingsByProjectIdAndSlugParams) (FindEnvironmentWithSettingsByProjectIdAndSlugRow, error) {
	row := db.QueryRowContext(ctx, findEnvironmentWithSettingsByProjectIdAndSlug, arg.WorkspaceID, arg.ProjectID, arg.Slug)
	var i FindEnvironmentWithSettingsByProjectIdAndSlugRow
	err := row.Scan(
		&i.Environment.Pk,
		&i.Environment.ID,
		&i.Environment.WorkspaceID,
		&i.Environment.ProjectID,
		&i.Environment.Slug,
		&i.Environment.Description,
		&i.Environment.DeleteProtection,
		&i.Environment.CreatedAt,
		&i.Environment.UpdatedAt,
		&i.EnvironmentBuildSetting.Pk,
		&i.EnvironmentBuildSetting.WorkspaceID,
		&i.EnvironmentBuildSetting.EnvironmentID,
		&i.EnvironmentBuildSetting.Dockerfile,
		&i.EnvironmentBuildSetting.DockerContext,
		&i.EnvironmentBuildSetting.CreatedAt,
		&i.EnvironmentBuildSetting.UpdatedAt,
		&i.EnvironmentRuntimeSetting.Pk,
		&i.EnvironmentRuntimeSetting.WorkspaceID,
		&i.EnvironmentRuntimeSetting.EnvironmentID,
		&i.EnvironmentRuntimeSetting.Port,
		&i.EnvironmentRuntimeSetting.CpuMillicores,
		&i.EnvironmentRuntimeSetting.MemoryMib,
		&i.EnvironmentRuntimeSetting.Command,
		&i.EnvironmentRuntimeSetting.Healthcheck,
		&i.EnvironmentRuntimeSetting.RegionConfig,
		&i.EnvironmentRuntimeSetting.ShutdownSignal,
		&i.EnvironmentRuntimeSetting.SentinelConfig,
		&i.EnvironmentRuntimeSetting.CreatedAt,
		&i.EnvironmentRuntimeSetting.UpdatedAt,
	)
	return i, err
}
