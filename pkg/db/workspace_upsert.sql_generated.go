// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: workspace_upsert.sql

package db

import (
	"context"
	"database/sql"
	"encoding/json"
)

const upsertWorkspace = `-- name: UpsertWorkspace :exec
INSERT INTO workspaces (
    id,
    org_id,
    name,
    slug,
    created_at_m,
    tier,
    beta_features,
    features,
    enabled,
    delete_protection
) VALUES (?, ?, ?, ?, ?, ?, ?, '{}', true, false)
ON DUPLICATE KEY UPDATE
    beta_features = VALUES(beta_features),
    name = VALUES(name)
`

type UpsertWorkspaceParams struct {
	ID           string          `db:"id"`
	OrgID        string          `db:"org_id"`
	Name         string          `db:"name"`
	Slug         string          `db:"slug"`
	CreatedAtM   int64           `db:"created_at_m"`
	Tier         sql.NullString  `db:"tier"`
	BetaFeatures json.RawMessage `db:"beta_features"`
}

// UpsertWorkspace
//
//	INSERT INTO workspaces (
//	    id,
//	    org_id,
//	    name,
//	    slug,
//	    created_at_m,
//	    tier,
//	    beta_features,
//	    features,
//	    enabled,
//	    delete_protection
//	) VALUES (?, ?, ?, ?, ?, ?, ?, '{}', true, false)
//	ON DUPLICATE KEY UPDATE
//	    beta_features = VALUES(beta_features),
//	    name = VALUES(name)
func (q *Queries) UpsertWorkspace(ctx context.Context, db DBTX, arg UpsertWorkspaceParams) error {
	_, err := db.ExecContext(ctx, upsertWorkspace,
		arg.ID,
		arg.OrgID,
		arg.Name,
		arg.Slug,
		arg.CreatedAtM,
		arg.Tier,
		arg.BetaFeatures,
	)
	return err
}
