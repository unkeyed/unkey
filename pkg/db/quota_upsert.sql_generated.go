// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: quota_upsert.sql

package db

import (
	"context"
	"database/sql"
)

const upsertQuota = `-- name: UpsertQuota :exec
INSERT INTO quota (
    workspace_id,
    requests_per_month,
    audit_logs_retention_days,
    logs_retention_days,
    team,
    ratelimit_api_limit,
    ratelimit_api_duration
) VALUES (?, ?, ?, ?, ?, ?, ?)
ON DUPLICATE KEY UPDATE
    requests_per_month = VALUES(requests_per_month),
    audit_logs_retention_days = VALUES(audit_logs_retention_days),
    logs_retention_days = VALUES(logs_retention_days),
    ratelimit_api_limit = VALUES(ratelimit_api_limit),
    ratelimit_api_duration = VALUES(ratelimit_api_duration)
`

type UpsertQuotaParams struct {
	WorkspaceID            string        `db:"workspace_id"`
	RequestsPerMonth       int64         `db:"requests_per_month"`
	AuditLogsRetentionDays int32         `db:"audit_logs_retention_days"`
	LogsRetentionDays      int32         `db:"logs_retention_days"`
	Team                   bool          `db:"team"`
	RatelimitApiLimit      sql.NullInt32 `db:"ratelimit_api_limit"`
	RatelimitApiDuration   sql.NullInt32 `db:"ratelimit_api_duration"`
}

// UpsertQuota
//
//	INSERT INTO quota (
//	    workspace_id,
//	    requests_per_month,
//	    audit_logs_retention_days,
//	    logs_retention_days,
//	    team,
//	    ratelimit_api_limit,
//	    ratelimit_api_duration
//	) VALUES (?, ?, ?, ?, ?, ?, ?)
//	ON DUPLICATE KEY UPDATE
//	    requests_per_month = VALUES(requests_per_month),
//	    audit_logs_retention_days = VALUES(audit_logs_retention_days),
//	    logs_retention_days = VALUES(logs_retention_days),
//	    ratelimit_api_limit = VALUES(ratelimit_api_limit),
//	    ratelimit_api_duration = VALUES(ratelimit_api_duration)
func (q *Queries) UpsertQuota(ctx context.Context, db DBTX, arg UpsertQuotaParams) error {
	_, err := db.ExecContext(ctx, upsertQuota,
		arg.WorkspaceID,
		arg.RequestsPerMonth,
		arg.AuditLogsRetentionDays,
		arg.LogsRetentionDays,
		arg.Team,
		arg.RatelimitApiLimit,
		arg.RatelimitApiDuration,
	)
	return err
}
