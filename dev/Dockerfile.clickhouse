FROM bitnamilegacy/clickhouse:25.6.4

# Copy ClickHouse schemas
COPY pkg/clickhouse/migrations /opt/clickhouse-schemas/

# Copy local dev admin user (NOT for production - uses hardcoded password)
COPY dev/clickhouse-local-admin.sql /opt/clickhouse-schemas/99_local_admin.sql

# Create initialization script that will execute our SQL files on first run
# (script is already made executable on host)
COPY dev/init-clickhouse.sh /docker-entrypoint-initdb.d/init-clickhouse.sh
