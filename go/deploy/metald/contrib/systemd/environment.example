# Metald Environment Variables Template
# NOTE: This service does NOT load .env files automatically
# Set these variables in your system environment or process manager
# 
# Usage examples:
#   systemd: EnvironmentFile=/etc/metald/environment
#   Docker:  docker run --env-file environment metald
#   Shell:   set -a; source environment; set +a; ./metald

# Server Configuration
UNKEY_METALD_BACKEND=firecracker
UNKEY_METALD_PORT=8080
UNKEY_METALD_ADDRESS=0.0.0.0

# Database Configuration
UNKEY_METALD_DATA_DIR=/opt/metald/data

# Billing Configuration
UNKEY_METALD_BILLING_ENABLED=true
UNKEY_METALD_BILLING_ENDPOINT=http://localhost:8081
UNKEY_METALD_BILLING_MOCK_MODE=false

# AssetManager Configuration (VM Asset Management)
UNKEY_METALD_ASSETMANAGER_ENABLED=true
UNKEY_METALD_ASSETMANAGER_ENDPOINT=http://localhost:8083
UNKEY_METALD_ASSETMANAGER_CACHE_DIR=/opt/metald/assets

# Network Configuration
UNKEY_METALD_NETWORK_ENABLED=true
UNKEY_METALD_NETWORK_IPV4_ENABLED=true
UNKEY_METALD_NETWORK_BRIDGE_IPV4=172.31.0.1/19
UNKEY_METALD_NETWORK_VM_SUBNET_IPV4=172.31.0.0/19
UNKEY_METALD_NETWORK_DNS_IPV4=8.8.8.8,8.8.4.4
UNKEY_METALD_NETWORK_IPV6_ENABLED=true
UNKEY_METALD_NETWORK_BRIDGE_IPV6=fd00::1/64
UNKEY_METALD_NETWORK_VM_SUBNET_IPV6=fd00::/64
UNKEY_METALD_NETWORK_DNS_IPV6=2606:4700:4700::1111,2606:4700:4700::1001
UNKEY_METALD_NETWORK_IPV6_MODE=dual-stack
UNKEY_METALD_NETWORK_BRIDGE=br-vms
UNKEY_METALD_NETWORK_RATE_LIMIT=true
UNKEY_METALD_NETWORK_RATE_LIMIT_MBPS=1000
UNKEY_METALD_NETWORK_MAX_VMS_PER_BRIDGE=1000
UNKEY_METALD_NETWORK_MULTI_BRIDGE=true
UNKEY_METALD_NETWORK_BRIDGE_PREFIX=metald-br
UNKEY_METALD_NETWORK_HOST_PROTECTION=true
UNKEY_METALD_NETWORK_PRIMARY_INTERFACE=

# TLS Configuration
UNKEY_METALD_TLS_MODE=spiffe
UNKEY_METALD_SPIFFE_SOCKET=/var/lib/spire/agent/agent.sock
UNKEY_METALD_TLS_CERT_FILE=
UNKEY_METALD_TLS_KEY_FILE=
UNKEY_METALD_TLS_CA_FILE=
UNKEY_METALD_TLS_ENABLE_CERT_CACHING=true
UNKEY_METALD_TLS_CERT_CACHE_TTL=5s

# OpenTelemetry Configuration
UNKEY_METALD_OTEL_ENABLED=false
UNKEY_METALD_OTEL_SERVICE_NAME=metald
UNKEY_METALD_OTEL_SERVICE_VERSION=0.1.0
UNKEY_METALD_OTEL_SAMPLING_RATE=1.0
UNKEY_METALD_OTEL_ENDPOINT=localhost:4318
UNKEY_METALD_OTEL_PROMETHEUS_ENABLED=true
UNKEY_METALD_OTEL_PROMETHEUS_PORT=9464
UNKEY_METALD_OTEL_PROMETHEUS_INTERFACE=127.0.0.1
UNKEY_METALD_OTEL_HIGH_CARDINALITY_ENABLED=false

# Integrated Jailer Configuration (Production Security - Firecracker only)
# Note: Metald now includes an integrated jailer implementation
UNKEY_METALD_JAILER_UID=1000
UNKEY_METALD_JAILER_GID=1000
UNKEY_METALD_JAILER_CHROOT_DIR=/srv/jailer