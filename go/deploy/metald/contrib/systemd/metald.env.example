# Metald Environment Configuration
# Copy this file to /etc/metald/metald.env and customize as needed

# Server Configuration
UNKEY_METALD_BACKEND=firecracker
UNKEY_METALD_PORT=8080
UNKEY_METALD_ADDRESS=0.0.0.0

# Process Manager Configuration (secure directories)
UNKEY_METALD_SOCKET_DIR=/opt/metald/sockets
UNKEY_METALD_LOG_DIR=/opt/metald/logs
UNKEY_METALD_MAX_PROCESSES=25

# Billing Configuration
UNKEY_METALD_BILLING_ENABLED=true
UNKEY_METALD_BILLING_ENDPOINT=http://localhost:8081
UNKEY_METALD_BILLING_MOCK_MODE=false

# Cloud Hypervisor Configuration (if using cloudhypervisor backend)
UNKEY_METALD_CH_ENDPOINT=unix:///tmp/ch.sock

# Firecracker Configuration (if using firecracker backend)
UNKEY_METALD_FC_ENDPOINT=unix:///tmp/firecracker.sock

# OpenTelemetry Configuration
UNKEY_METALD_OTEL_ENABLED=true
UNKEY_METALD_OTEL_SERVICE_NAME=metald
UNKEY_METALD_OTEL_SERVICE_VERSION=0.0.1
UNKEY_METALD_OTEL_SAMPLING_RATE=1.0
UNKEY_METALD_OTEL_ENDPOINT=localhost:4318
UNKEY_METALD_OTEL_PROMETHEUS_ENABLED=true
UNKEY_METALD_OTEL_PROMETHEUS_PORT=9464

# Jailer Configuration (Production Security - Firecracker only)
UNKEY_METALD_JAILER_ENABLED=false
UNKEY_METALD_JAILER_BINARY=/usr/bin/jailer
UNKEY_METALD_FIRECRACKER_BINARY=/usr/bin/firecracker
UNKEY_METALD_JAILER_UID=1000
UNKEY_METALD_JAILER_GID=1000
UNKEY_METALD_JAILER_CHROOT_DIR=/srv/jailer
UNKEY_METALD_JAILER_NETNS=true
UNKEY_METALD_JAILER_PIDNS=true

# Jailer Resource Limits
UNKEY_METALD_JAILER_MEMORY_LIMIT=134217728  # 128MB
UNKEY_METALD_JAILER_CPU_QUOTA=100           # 1 CPU core (100%)
UNKEY_METALD_JAILER_FD_LIMIT=1024           # File descriptors

# Development Configuration
# Uncomment and modify for development environments
# UNKEY_METALD_OTEL_ENABLED=false
# UNKEY_METALD_JAILER_ENABLED=false

# Production Configuration Examples
# For high-security production environments:
# UNKEY_METALD_JAILER_ENABLED=true
# UNKEY_METALD_JAILER_NETNS=true
# UNKEY_METALD_JAILER_PIDNS=true
# UNKEY_METALD_JAILER_MEMORY_LIMIT=268435456  # 256MB
# UNKEY_METALD_JAILER_CPU_QUOTA=200           # 2 CPU cores