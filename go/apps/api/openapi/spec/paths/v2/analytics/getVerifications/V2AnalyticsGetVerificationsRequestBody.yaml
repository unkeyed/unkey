type: object
required:
  - query
properties:
  query:
    type: string
    description: |
      SQL query to execute against your analytics data.

      The query will be automatically rewritten to:
      - Inject workspace_id filters for data isolation
      - Map table aliases (e.g., key_verifications â†’ default.key_verifications_raw_v2)
      - Resolve virtual columns (apiId, externalId)
      - Block dangerous operations

      Only SELECT queries are allowed.
    example: "SELECT COUNT(*) as total FROM key_verifications WHERE outcome = 'VALID' AND time >= toUnixTimestamp64Milli(now() - INTERVAL 7 DAY)"
