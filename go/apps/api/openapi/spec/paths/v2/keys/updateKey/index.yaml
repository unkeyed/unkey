post:
  tags:
    - keys
  summary: Update API key properties without changing the key itself
  description: |-
    Modifies the properties of an existing API key without changing the key string itself. This endpoint supports partial updates - you only need to include the fields you want to change.

    You can use this endpoint to:
    - Rename keys for better organization
    - Update metadata to reflect changes in user status, plan, or properties
    - Modify usage limits or rate limits
    - Enable or disable keys temporarily
    - Change key expiration dates
    - Add or update user identifiers

    To explicitly remove/disable a feature, set its field to null. Fields not included in the request remain unchanged. For managing permissions or roles, use the specialized endpoints (keys.addPermissions, keys.removePermissions, etc.) instead.

    Changes may take up to 30 seconds to propagate to all regions due to cache invalidation. For immediate effect in the current region, follow the update with a verification request.
  operationId: updateKey
  x-speakeasy-name-override: updateKey
  security:
    - rootKey: []
  requestBody:
    content:
      application/json:
        schema:
          "$ref": "V2KeysUpdateKeyRequestBody.yaml"
        examples:
          disableKey:
            summary: Temporarily disable a key
            value:
              keyId: key_2cGKbMxRyIzhCxo1Idjz8q
              enabled: false
          updateMetadata:
            summary: Update key metadata
            value:
              keyId: key_2cGKbMxRyIzhCxo1Idjz8q
              meta:
                plan: enterprise
                features:
                  advancedAnalytics: true
                  customReports: true
                updatedAt: "2023-07-15T12:30:45Z"
          changeExpiration:
            summary: Change expiration date
            value:
              keyId: key_2cGKbMxRyIzhCxo1Idjz8q
              expires: 1735689600000
          updateLimits:
            summary: Modify usage limits
            value:
              keyId: key_2cGKbMxRyIzhCxo1Idjz8q
              credits:
                remaining: 5000
                refill:
                  interval: monthly
                  amount: 5000
                  refillDay: 1
              ratelimits:
                - name: requests
                  limit: 200
                  duration: 60000
          removeFeature:
            summary: Remove a feature
            value:
              keyId: key_2cGKbMxRyIzhCxo1Idjz8q
              expires:
              meta:
    required: true
  responses:
    "200":
      content:
        application/json:
          schema:
            "$ref": "./V2KeysUpdateKeyResponseBody.yaml"
          examples:
            success:
              summary: Successful update
              value:
                meta:
                  requestId: req_01H9TQPP77V5E48E9SH0BG0ZQY
                data: {}
      description: Key successfully updated. Changes may take up to 30 seconds
        to propagate to all regions due to cache invalidation. The response is
        empty by design - use keys.getKey to retrieve the current state if needed.
    "400":
      description: Bad request
      content:
        application/json:
          schema:
            "$ref": "../../../../error/BadRequestErrorResponse.yaml"
    "401":
      description: Unauthorized
      content:
        application/json:
          schema:
            "$ref": "../../../../error/UnauthorizedErrorResponse.yaml"
    "403":
      description: Forbidden
      content:
        application/json:
          schema:
            "$ref": "../../../../error/ForbiddenErrorResponse.yaml"
    "404":
      description: Not found
      content:
        application/json:
          schema:
            "$ref": "../../../../error/NotFoundErrorResponse.yaml"
    "500":
      description: Internal server error
      content:
        application/json:
          schema:
            "$ref": "../../../../error/InternalServerErrorResponse.yaml"
