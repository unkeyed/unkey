Response:
  description: |-
    Successfully retrieved the list of identities with pagination information.
  content:
    application/json:
      schema:
        $ref: "#/V2IdentitiesListIdentitiesResponseBody"
      examples:
        standard:
          summary: Identity listing with pagination
          value:
            meta:
              requestId: req_01H9TQPP77V5E48E9SH0BG0ZQX
            data:
              identities:
                - id: id_01H9TQP8NP8JN3X8HWSKPW43JE
                  externalId: user_abc123
                  ratelimits:
                    - name: api_requests
                      limit: 1000
                      duration: 60000
                    - name: heavy_operations
                      limit: 100
                      duration: 3600000
                - id: id_02ZYR3Q9NP8JM4X8HWSKPW43JF
                  externalId: user_def456
                  ratelimits:
                    - name: api_requests
                      limit: 500
                      duration: 60000
              cursor: cursor_eyJsYXN0SWQiOiJpZF8wMlpZUjNROU5QOEpNNFg4SFdTS1BXNDNKRiJ9
              total: 247
        emptyList:
          summary: Empty identity list
          value:
            meta:
              requestId: req_01H9TQPP77V5E48E9SH0BG0ZQY
            data:
              identities: []
              total: 0

V2IdentitiesListIdentitiesResponseBody:
  type: object
  required:
    - meta
    - data
    - pagination
  properties:
    meta:
      $ref: "../../../../common/meta.yaml"
    data:
      "$ref": "#/IdentitiesListIdentitiesResponseData"
    pagination:
      "$ref": "../../../../common/pagination.yaml"
  additionalProperties: false

IdentitiesListIdentitiesResponseData:
  type: array
  items:
    "$ref": "#/Identity"
  description: List of identities matching the specified criteria.

Identity:
  type: object
  properties:
    externalId:
      type: string
      description: External identity ID
    meta:
      type: object
      description: Identity metadata
    ratelimits:
      type: array
      items:
        "$ref": "../../../../common/RatelimitResponse.yaml"
      description: Identity ratelimits
  required:
    - externalId
    - ratelimits
  additionalProperties: false
