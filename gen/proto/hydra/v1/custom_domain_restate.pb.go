// Code generated by protoc-gen-go-restate. DO NOT EDIT.
// versions:
// - protoc-gen-go-restate v0.1
// - protoc             (unknown)
// source: hydra/v1/custom_domain.proto

package hydrav1

import (
	fmt "fmt"
	sdk_go "github.com/restatedev/sdk-go"
	encoding "github.com/restatedev/sdk-go/encoding"
	ingress "github.com/restatedev/sdk-go/ingress"
)

// CustomDomainServiceClient is the client API for hydra.v1.CustomDomainService service.
//
// CustomDomainService manages domain verification workflows
type CustomDomainServiceClient interface {
	// VerifyDomain starts the CNAME verification workflow for a custom domain.
	// Uses exponential backoff to check DNS records over ~24 hours.
	// Key: domain name (ensures only one verification per domain at a time)
	VerifyDomain(opts ...sdk_go.ClientOption) sdk_go.Client[*VerifyDomainRequest, *VerifyDomainResponse]
	// RetryVerification resets and restarts verification for a failed domain.
	// Key: domain name
	RetryVerification(opts ...sdk_go.ClientOption) sdk_go.Client[*RetryVerificationRequest, *RetryVerificationResponse]
}

type customDomainServiceClient struct {
	ctx     sdk_go.Context
	key     string
	options []sdk_go.ClientOption
}

func NewCustomDomainServiceClient(ctx sdk_go.Context, key string, opts ...sdk_go.ClientOption) CustomDomainServiceClient {
	cOpts := append([]sdk_go.ClientOption{sdk_go.WithProtoJSON}, opts...)
	return &customDomainServiceClient{
		ctx,
		key,
		cOpts,
	}
}
func (c *customDomainServiceClient) VerifyDomain(opts ...sdk_go.ClientOption) sdk_go.Client[*VerifyDomainRequest, *VerifyDomainResponse] {
	cOpts := c.options
	if len(opts) > 0 {
		cOpts = append(append([]sdk_go.ClientOption{}, cOpts...), opts...)
	}
	return sdk_go.WithRequestType[*VerifyDomainRequest](sdk_go.Object[*VerifyDomainResponse](c.ctx, "hydra.v1.CustomDomainService", c.key, "VerifyDomain", cOpts...))
}

func (c *customDomainServiceClient) RetryVerification(opts ...sdk_go.ClientOption) sdk_go.Client[*RetryVerificationRequest, *RetryVerificationResponse] {
	cOpts := c.options
	if len(opts) > 0 {
		cOpts = append(append([]sdk_go.ClientOption{}, cOpts...), opts...)
	}
	return sdk_go.WithRequestType[*RetryVerificationRequest](sdk_go.Object[*RetryVerificationResponse](c.ctx, "hydra.v1.CustomDomainService", c.key, "RetryVerification", cOpts...))
}

// CustomDomainServiceIngressClient is the ingress client API for hydra.v1.CustomDomainService service.
//
// This client is used to call the service from outside of a Restate context.
type CustomDomainServiceIngressClient interface {
	// VerifyDomain starts the CNAME verification workflow for a custom domain.
	// Uses exponential backoff to check DNS records over ~24 hours.
	// Key: domain name (ensures only one verification per domain at a time)
	VerifyDomain() ingress.Requester[*VerifyDomainRequest, *VerifyDomainResponse]
	// RetryVerification resets and restarts verification for a failed domain.
	// Key: domain name
	RetryVerification() ingress.Requester[*RetryVerificationRequest, *RetryVerificationResponse]
}

type customDomainServiceIngressClient struct {
	client      *ingress.Client
	serviceName string
	key         string
}

func NewCustomDomainServiceIngressClient(client *ingress.Client, key string) CustomDomainServiceIngressClient {
	return &customDomainServiceIngressClient{
		client,
		"hydra.v1.CustomDomainService",
		key,
	}
}

func (c *customDomainServiceIngressClient) VerifyDomain() ingress.Requester[*VerifyDomainRequest, *VerifyDomainResponse] {
	codec := encoding.ProtoJSONCodec
	return ingress.NewRequester[*VerifyDomainRequest, *VerifyDomainResponse](c.client, c.serviceName, "VerifyDomain", &c.key, &codec)
}

func (c *customDomainServiceIngressClient) RetryVerification() ingress.Requester[*RetryVerificationRequest, *RetryVerificationResponse] {
	codec := encoding.ProtoJSONCodec
	return ingress.NewRequester[*RetryVerificationRequest, *RetryVerificationResponse](c.client, c.serviceName, "RetryVerification", &c.key, &codec)
}

// CustomDomainServiceServer is the server API for hydra.v1.CustomDomainService service.
// All implementations should embed UnimplementedCustomDomainServiceServer
// for forward compatibility.
//
// CustomDomainService manages domain verification workflows
type CustomDomainServiceServer interface {
	// VerifyDomain starts the CNAME verification workflow for a custom domain.
	// Uses exponential backoff to check DNS records over ~24 hours.
	// Key: domain name (ensures only one verification per domain at a time)
	VerifyDomain(ctx sdk_go.ObjectContext, req *VerifyDomainRequest) (*VerifyDomainResponse, error)
	// RetryVerification resets and restarts verification for a failed domain.
	// Key: domain name
	RetryVerification(ctx sdk_go.ObjectContext, req *RetryVerificationRequest) (*RetryVerificationResponse, error)
}

// UnimplementedCustomDomainServiceServer should be embedded to have
// forward compatible implementations.
//
// NOTE: this should be embedded by value instead of pointer to avoid a nil
// pointer dereference when methods are called.
type UnimplementedCustomDomainServiceServer struct{}

func (UnimplementedCustomDomainServiceServer) VerifyDomain(ctx sdk_go.ObjectContext, req *VerifyDomainRequest) (*VerifyDomainResponse, error) {
	return nil, sdk_go.TerminalError(fmt.Errorf("method VerifyDomain not implemented"), 501)
}
func (UnimplementedCustomDomainServiceServer) RetryVerification(ctx sdk_go.ObjectContext, req *RetryVerificationRequest) (*RetryVerificationResponse, error) {
	return nil, sdk_go.TerminalError(fmt.Errorf("method RetryVerification not implemented"), 501)
}
func (UnimplementedCustomDomainServiceServer) testEmbeddedByValue() {}

// UnsafeCustomDomainServiceServer may be embedded to opt out of forward compatibility for this service.
// Use of this interface is not recommended, as added methods to CustomDomainServiceServer will
// result in compilation errors.
type UnsafeCustomDomainServiceServer interface {
	mustEmbedUnimplementedCustomDomainServiceServer()
}

func NewCustomDomainServiceServer(srv CustomDomainServiceServer, opts ...sdk_go.ServiceDefinitionOption) sdk_go.ServiceDefinition {
	// If the following call panics, it indicates UnimplementedCustomDomainServiceServer was
	// embedded by pointer and is nil.  This will cause panics if an
	// unimplemented method is ever invoked, so we test this at initialization
	// time to prevent it from happening at runtime later due to I/O.
	if t, ok := srv.(interface{ testEmbeddedByValue() }); ok {
		t.testEmbeddedByValue()
	}
	sOpts := append([]sdk_go.ServiceDefinitionOption{sdk_go.WithProtoJSON}, opts...)
	router := sdk_go.NewObject("hydra.v1.CustomDomainService", sOpts...)
	router = router.Handler("VerifyDomain", sdk_go.NewObjectHandler(srv.VerifyDomain))
	router = router.Handler("RetryVerification", sdk_go.NewObjectHandler(srv.RetryVerification))
	return router
}
